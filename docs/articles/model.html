<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modeling Approach and Methods • riceflows4ff</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<script src="../extra.js"></script><meta property="og:title" content="Modeling Approach and Methods">
<meta property="og:description" content="riceflows4ff">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">riceflows4ff</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/calcs.html">Calculation Functions</a>
    </li>
    <li>
      <a href="../articles/joins.html">Data Structure and Joins</a>
    </li>
    <li>
      <a href="../articles/model.html">Modeling Approach and Methods</a>
    </li>
    <li>
      <a href="../articles/plot.html">Static Maps and Plots</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://flowwest.shinyapps.io/riceflows4ff/" class="external-link">Interactive Map and Data Download</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Modeling Approach and Methods</h1>
            
      
      
      <div class="hidden name"><code>model.Rmd</code></div>

    </div>

    
    
<p>This article describes the approach and methods used to calculate the
distances from rice fields to fish-bearing streams.</p>
<div class="section level2">
<h2 id="watershed-delineation-and-classification">Watershed delineation and classification<a class="anchor" aria-label="anchor" href="#watershed-delineation-and-classification"></a>
</h2>
<p>First, we divided the Sacramento Valley into watersheds based on the
National Hydrography Dataset (NHD) HUC-10 watersheds, and further split
them as needed after inspection of drainage canal flow patterns.</p>
<p>Each watershed was categorized by “flow type”. A “direct” flow type
identifies a watershed where the point of return is to a salmonid
rearing stream. An “indirect” flow type identifies a watershed where the
point of return is to a secondary channel that does not support salmonid
rearing. A “lateral” flow type identifies a watershed that drains
laterally into a salmonid rearing stream instead of to a singular point
of return. Example figures are shown for clarification below.</p>
<p><img src="model_files/figure-html/model-watersheds-1.png" width="680"></p>
<div class="section level3">
<h3 id="direct-flow">Direct flow<a class="anchor" aria-label="anchor" href="#direct-flow"></a>
</h3>
<p>The following figure shows watersheds that drain directly into
fish-bearing streams along with their “direct” points of return.</p>
<p><img src="model_files/figure-html/model-watersheds-direct-1.png" width="680"></p>
</div>
<div class="section level3">
<h3 id="indirect-flow">Indirect flow<a class="anchor" aria-label="anchor" href="#indirect-flow"></a>
</h3>
<p>The following figure shows watersheds that drain indirectly into
secondary channels along with their “indirect” points of return.</p>
<p><img src="model_files/figure-html/model-watersheds-indirect-1.png" width="680"></p>
</div>
<div class="section level3">
<h3 id="lateral-flow">Lateral flow<a class="anchor" aria-label="anchor" href="#lateral-flow"></a>
</h3>
<p>The following figure shows the third set of watersheds that drain
laterally into salmonid-rearing streams, without defined return
points.</p>
<p><img src="model_files/figure-html/model-watersheds-lateral-1.png" width="680"></p>
</div>
</div>
<div class="section level2">
<h2 id="distance-calculations">Distance calculations<a class="anchor" aria-label="anchor" href="#distance-calculations"></a>
</h2>
<p>We used the center point (centroid) of each rice field to calculate
distance to either its watershed’s return point (for the direct and
indirect watersheds) or to the nearest stream (for the lateral flow
watersheds). In all cases, straight-line distances provided a simple
distance approximation for this planning-level analysis. For indirect
drainages, flow distances along the secondary channels were calculated
and added to the straight line distances from the rice fields to the
point of return. Example figures and details are provided below.</p>
<div class="section level3">
<h3 id="direct-flow-1">Direct flow<a class="anchor" aria-label="anchor" href="#direct-flow-1"></a>
</h3>
<p>Distances for direct flow watersheds were calculated as simple
straight-line distances from each rice field centroid to the assigned
watershed return point, located on a salmonid-rearing stream. The
following figure shows rice field distances within the direct flow
watersheds.</p>
<p><img src="model_files/figure-html/model-distances-direct-1.png" width="680"></p>
</div>
<div class="section level3">
<h3 id="indirect-flow-1">Indirect flow<a class="anchor" aria-label="anchor" href="#indirect-flow-1"></a>
</h3>
<p>Distance calculations for indirect watersheds use a combination of a
simple straight-line distance and a flow distance along the secondary
channel.</p>
<p>First, straight-line distances were calculated from each rice field
centroid to the indirect point of return assigned to the watershed,
using the same method as the direct returns previously described.</p>
<p><img src="model_files/figure-html/model-distances-indirect-field-1.png" width="680"></p>
<p>Then, the flow distances along the secondary channel, from the return
point (<code>return_id</code>) into the downstream return point on the
salmonid-rearing stream (<code>dtfbs_id</code>)<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>, were calculated.</p>
<p><img src="model_files/figure-html/model-distances-indirect-canal-1.png" width="680"></p>
<p>The straight-line distances were added to the flow distances along
secondary channels to get a total distance for each field. Total
distance results for indirect watershed are shown in the following
figure.</p>
<p><img src="model_files/figure-html/model-distances-returns-1.png" width="680"></p>
</div>
<div class="section level3">
<h3 id="lateral-flow-1">Lateral flow<a class="anchor" aria-label="anchor" href="#lateral-flow-1"></a>
</h3>
<p>Distances for lateral flow watersheds were calculated as simple
straight-line distances from each rice field centroid to the nearest
salmonid-rearing stream within the watershed. The following figure shows
rice field distances within the lateral flow watersheds.</p>
<p><img src="model_files/figure-html/model-distances-lateral-1.png" width="680"></p>
</div>
<div class="section level3">
<h3 id="note-rectangular-distances">Note: Rectangular distances<a class="anchor" aria-label="anchor" href="#note-rectangular-distances"></a>
</h3>
<p>An alternative “rectangular” distance calculation was also included,
using grid distance (east-west plus north-south) rather than
straight-line (hypotenuse) distance. At the scale of this analysis, the
difference between the two versions is minimal. Total distance results
using the grid distance are shown in the following figure.</p>
<p><img src="model_files/figure-html/model-distances-total-rect-1.png" width="680"></p>
<p>The straight-line and rectangular distance measures help to place a
lower and upper bound, respectively, on the true flow distance from each
rice field to the nearest point of return on a salmonid-rearing stream.
Since the majority of the drainage infrastructure is on a grid pattern,
all distances should lie between these two values. The following figure
shows that distances are never greater than sqrt(2) times the
straight-line flow distance. This means that true return flow distances
will not be more than 1.41 times the straight-line approximation used in
this study.</p>
<p><img src="model_files/figure-html/model-distances-comparison-1.png" width="680"></p>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr>
<ol>
<li id="fn1"><p>Salmonid rearing streams are frequently abbreviated as
<code>fbs</code> in source code and attribute names; this is short for
<em>fish-bearing stream</em><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="mailto:bhackenjos@gmail.com">Bethany Hackenjos</a>, <a href="mailto:slewis@flowwest.com">Skyler Lewis</a>, <a href="mailto:ipeng@flowwest.com">Inigo Peng</a>, <a href="mailto:akelleher@flowwest.com">Aidan Kelleher</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
